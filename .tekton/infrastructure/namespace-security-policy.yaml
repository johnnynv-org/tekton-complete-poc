apiVersion: v1
kind: Namespace
metadata:
  name: tekton-pipelines
  labels:
    # Tekton namespace labels
    app.kubernetes.io/instance: default
    app.kubernetes.io/part-of: tekton-pipelines
    
    # Pod Security Standards configuration for Tekton
    # Tekton requires privileged mode for its internal containers
    # (prepare, place-scripts, working-dir-initializer)
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: privileged  
    pod-security.kubernetes.io/warn: privileged
  annotations:
    # Documentation for security policy decision
    tekton-poc/security-policy: |
      This namespace is configured with 'privileged' Pod Security Standards
      to allow Tekton Pipelines internal containers to function properly.
      
      Tekton creates several sidecar containers (prepare, place-scripts, 
      working-dir-initializer) that require elevated privileges to:
      - Initialize workspaces
      - Set up file permissions
      - Coordinate between steps
      
      User-defined steps still use restricted security contexts via stepTemplate.
    tekton-poc/security-justification: |
      Tekton v1.3.0 internal containers cannot comply with 'restricted' 
      Pod Security Standards due to architectural requirements.
      This is a known limitation documented in Tekton security guidelines.
